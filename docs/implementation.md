# Руководство по внедрению AI-ассистента для Vanessa Automation

## Обзор решения

Данное решение предоставляет AI-ассистенту (например, Claude, ChatGPT, Gemini) необходимые знания для генерации и поддержки сценариев автоматизированного тестирования на платформе Vanessa Automation.

### Что входит в решение:

1. **VANESSA_AI_GUIDE.md** - основное руководство для AI с полным описанием синтаксиса, правил и категорий шагов
2. **VANESSA_TEMPLATES.md** - практические шаблоны готовых сценариев для типовых задач
3. **vanessa_steps_ai_knowledge.json** - структурированная база всех 1569 доступных шагов
4. **VANESSA_STEPS_COMPACT.md** - компактный справочник наиболее используемых шагов
5. **БиблиотекаШагов.json** - исходная полная библиотека шагов (ваш файл)

---

## Варианты использования

### Вариант 1: Прямая загрузка документов в чат (рекомендуется)

**Для Claude.ai, ChatGPT и других чат-интерфейсов:**

1. **Загрузите основные документы:**
   - `VANESSA_AI_GUIDE.md` (основное руководство)
   - `VANESSA_TEMPLATES.md` (шаблоны)
   - `vanessa_steps_ai_knowledge.json` (база шагов)

2. **Используйте промпт:**

```
Ты - эксперт по автоматизированному тестированию 1С с использованием Vanessa Automation.

Я загрузил тебе три документа:
1. VANESSA_AI_GUIDE.md - полное руководство по созданию сценариев
2. VANESSA_TEMPLATES.md - готовые шаблоны для типовых задач
3. vanessa_steps_ai_knowledge.json - база всех доступных шагов

КРИТИЧЕСКИ ВАЖНО:
- Используй ТОЛЬКО шаги из загруженной базы данных
- НЕ выдумывай новые шаги
- Соблюдай синтаксис Gherkin
- Всегда проверяй наличие шага в базе перед использованием

Твоя задача:
1. Понять требование к тесту от пользователя
2. Выбрать подходящий шаблон из VANESSA_TEMPLATES.md
3. Подобрать шаги из базы vanessa_steps_ai_knowledge.json
4. Сгенерировать готовый feature-файл
5. Объяснить логику сценария

Готов помогать с созданием и поддержкой тестовых сценариев!
```

3. **Начинайте работу:**

```
Создай сценарий для проверки создания нового элемента справочника "Номенклатура"
```

---

### Вариант 2: Использование расширенной базы шагов

**Если нужен доступ ко всем 1569 шагам:**

Загрузите дополнительно файл `БиблиотекаШагов.json` и используйте промпт:

```
У меня есть полная библиотека из 1569 шагов Vanessa Automation в файле БиблиотекаШагов.json.

При генерации сценариев:
1. Сначала просмотри vanessa_steps_ai_knowledge.json для понимания категорий
2. Для точного поиска конкретных шагов используй БиблиотекаШагов.json
3. Проверяй точное соответствие имени шага из библиотеки

Формат шага в БиблиотекаШагов.json:
{
  "ИмяШага": "точный текст шага с параметрами",
  "ОписаниеШага": "описание назначения",
  "ПолныйТипШага": "категория.подкатегория"
}
```

---

### Вариант 3: Настройка системного промпта (для API или локальных моделей)

**Для интеграции через API или локальных LLM:**

Добавьте содержимое `VANESSA_AI_GUIDE.md` в системный промпт вашей модели:

```python
system_prompt = """
Ты - AI-ассистент для генерации сценариев Vanessa Automation.

{содержимое VANESSA_AI_GUIDE.md}

ВАЖНО:
- База доступных шагов загружена в контекст
- Используй ТОЛЬКО шаги из базы данных
- Для поиска шага используй поиск по ключевым словам в JSON
- Всегда проверяй синтаксис перед выдачей
"""

# Загружаем базу шагов
with open('vanessa_steps_ai_knowledge.json', 'r', encoding='utf-8') as f:
    steps_db = json.load(f)
    
# Добавляем в контекст
context = f"{system_prompt}\n\nБаза шагов:\n{json.dumps(steps_db, ensure_ascii=False)}"
```

---

### Вариант 4: Создание навыка (Skill) для Claude Projects

**Для использования в Claude Projects:**

1. Создайте новый Project в Claude.ai
2. Добавьте в Project Knowledge:
   - `VANESSA_AI_GUIDE.md`
   - `VANESSA_TEMPLATES.md`
   - `vanessa_steps_ai_knowledge.json`

3. Настройте Custom Instructions:

```
Ты специализируешься на создании BDD-сценариев для Vanessa Automation.

Всегда следуй этому алгоритму:
1. Анализ требования пользователя
2. Выбор подходящего шаблона
3. Подбор шагов из базы знаний проекта
4. Генерация feature-файла
5. Валидация всех шагов по базе

При работе:
- Загружай данные из Project Knowledge
- Используй только задокументированные шаги
- Объясняй логику сценария
- Предупреждай о зависимостях
```

---

## Типовые запросы к AI-ассистенту

### Создание нового сценария

```
Создай сценарий для тестирования создания документа "Заказ покупателя" 
с заполнением шапки и табличной части
```

### Улучшение существующего сценария

```
Вот мой сценарий:
[вставка сценария]

Проверь:
1. Все ли шаги из библиотеки?
2. Правильный ли синтаксис?
3. Достаточно ли проверок?
4. Можно ли упростить?
```

### Отладка сценария

```
Сценарий падает на шаге:
И в поле "Покупатель" я ввожу текст "ООО Рога и копыта"

Ошибка: "Поле не найдено"

Как исправить?
```

### Преобразование ручных тестов

```
У меня есть ручной тест-кейс:
1. Открыть список заказов
2. Создать новый заказ
3. Выбрать покупателя
4. Добавить товары
5. Провести документ
6. Проверить проведение

Преобразуй в Gherkin-сценарий для Vanessa Automation
```

---

## Проверка качества сгенерированного сценария

AI-ассистент должен проверять каждый сценарий по чеклисту:

### Автоматическая проверка

```
После генерации сценария проверь:

1. Синтаксис:
   ✓ Указана кодировка # encoding: utf-8
   ✓ Указан язык # language: ru
   ✓ Есть блок Функционал
   ✓ Правильные ключевые слова (Дано/Когда/Тогда)

2. Шаги:
   ✓ Все шаги из библиотеки
   ✓ Правильные кавычки (только ")
   ✓ Правильный формат переменных ($Имя$)

3. Логика:
   ✓ Есть предусловия (Дано)
   ✓ Есть действия (Когда)
   ✓ Есть проверки (Тогда)
   ✓ Логичная последовательность

4. Качество:
   ✓ Понятные имена переменных
   ✓ Комментарии в сложных местах
   ✓ Нет дублирования (используются подсценарии)
   ✓ Корректная обработка ошибок
```

---

## Примеры диалогов с AI

### Пример 1: Базовый запрос

**Пользователь:**
```
Создай сценарий для проверки создания контрагента
```

**AI:**
```gherkin
# encoding: utf-8
# language: ru

@Справочники @Контрагенты
Функционал: Создание контрагента
    Как пользователь системы
    Я хочу создавать новых контрагентов
    Чтобы вести учет партнеров

Контекст:
    Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий
    И Я закрыл все окна клиентского приложения

Сценарий: Успешное создание контрагента
    Дано Я открываю навигационную ссылку "e1cib/list/Справочник.Контрагенты"
    Когда я нажимаю на кнопку с именем "FormCreate"
    Тогда открылось окно "Контрагент (создание)"
    И в поле "Наименование" я ввожу текст "ООО Тестовая компания"
    И в поле "ИНН" я ввожу текст "1234567890"
    И я нажимаю на кнопку с именем "FormWrite"
    Тогда элемент формы с именем "Наименование" стал равен "ООО Тестовая компания"
```

**Объяснение AI:**
```
Сценарий проверяет базовый функционал создания контрагента:

1. Открываем список справочника
2. Создаем новый элемент
3. Заполняем обязательные поля
4. Записываем
5. Проверяем сохранение

Все шаги взяты из категорий:
- UI.Окна: открытие форм
- UI.Формы.Поля: работа с полями
- UI.Кнопки: нажатие кнопок

Готово к запуску!
```

### Пример 2: Сложный запрос

**Пользователь:**
```
Нужен сценарий для проверки полного цикла: создание заказа, 
создание отгрузки на основании заказа, проверка остатков
```

**AI:**
```
Это комплексный сценарий, который лучше разбить на части.
Предлагаю два подхода:

ПОДХОД 1: Тестирование через UI (формы)
[генерирует сценарий с открытием форм]

ПОДХОД 2: Тестирование движений (рекомендуется)
[генерирует сценарий с программным проведением]

Рекомендую Подход 2, так как:
- Быстрее выполняется
- Более стабильный
- Проще поддерживать
- Изолирует тестирование движений от UI

Какой подход выбираем?
```

### Пример 3: Исправление ошибок

**Пользователь:**
```
Сценарий падает:
И в поле 'Покупатель' я ввожу текст 'ООО Рога'
```

**AI:**
```
Проблема: используются одинарные кавычки.

Правильно:
И в поле "Покупатель" я ввожу текст "ООО Рога"

В Vanessa Automation используются только двойные кавычки.

Проверил базу шагов - правильный шаг:
И в поле "ИмяПоля" я ввожу текст "Значение"
```

---

## Интеграция в рабочий процесс

### Сценарий использования 1: Разработка новых тестов

```
[Аналитик] → пишет требование в JIRA
            ↓
[Тестировщик] → копирует требование
            ↓
[AI-ассистент] → генерирует feature-файл
            ↓
[Тестировщик] → проверяет и дорабатывает
            ↓
[Git] → коммитит в репозиторий
            ↓
[CI/CD] → запускает тесты
```

### Сценарий использования 2: Поддержка существующих тестов

```
[Разработчик] → меняет UI в 1С
            ↓
[Тесты] → начинают падать
            ↓
[Тестировщик] → копирует падающий сценарий в AI
            ↓
[AI-ассистент] → анализирует и предлагает исправление
            ↓
[Тестировщик] → применяет изменения
            ↓
[Тесты] → снова проходят
```

### Сценарий использования 3: Обучение новых сотрудников

```
[Новый тестировщик] → читает VANESSA_AI_GUIDE.md
            ↓
[Новый тестировщик] → изучает примеры в VANESSA_TEMPLATES.md
            ↓
[Новый тестировщик] → пробует создать простой сценарий с AI
            ↓
[AI-ассистент] → подсказывает и исправляет
            ↓
[Новый тестировщик] → быстро становится продуктивным
```

---

## Ограничения и рекомендации

### Что AI делает хорошо:

✅ Генерирует синтаксически правильные сценарии
✅ Подбирает шаги из библиотеки
✅ Объясняет логику сценария
✅ Находит ошибки в существующих сценариях
✅ Предлагает оптимизации
✅ Создает документацию к тестам

### Что требует проверки человеком:

⚠️ Логика бизнес-процессов (AI не знает вашу конфигурацию)
⚠️ Навигационные ссылки на объекты (нужны реальные GUID)
⚠️ Названия полей и форм (могут отличаться в вашей конфигурации)
⚠️ Проверки результатов (AI может упустить важные проверки)
⚠️ Тестовые данные (нужны реальные значения)

### Рекомендации:

1. **Всегда проверяйте сгенерированные сценарии** перед запуском
2. **Используйте AI как помощника**, а не замену тестировщика
3. **Начинайте с простых сценариев** и постепенно усложняйте
4. **Создавайте библиотеку проверенных шаблонов** для вашего проекта
5. **Документируйте особенности** вашей конфигурации для AI

---

## Обновление базы шагов

Когда появляются новые шаги или обновления Vanessa Automation:

1. **Выгрузите новую библиотеку шагов** из Vanessa Automation
2. **Обновите файлы:**
   ```bash
   # Заменить БиблиотекаШагов.json новой версией
   # Перегенерировать vanessa_steps_ai_knowledge.json
   ```

3. **Уведомите AI:**
   ```
   Я обновил библиотеку шагов. Теперь доступно [N] шагов.
   Загрузи новый файл vanessa_steps_ai_knowledge.json
   ```

---

## Метрики и KPI

Рекомендуемые метрики для оценки эффективности:

- **Время создания нового сценария**: до/после внедрения AI
- **Количество ошибок в сценариях**: синтаксических и логических
- **Время обучения новых сотрудников**: сокращение периода адаптации
- **Покрытие тестами**: увеличение количества сценариев
- **Стабильность тестов**: процент успешных прогонов

---

## Решение типовых проблем

### Проблема: AI генерирует несуществующие шаги

**Решение:**
```
В начале каждого запроса напоминай:
"Используй ТОЛЬКО шаги из загруженного файла vanessa_steps_ai_knowledge.json.
Если нужного шага нет - скажи об этом, не выдумывай."
```

### Проблема: AI не понимает контекст конфигурации

**Решение:**
Создайте дополнительный файл с описанием вашей конфигурации:

```markdown
# Описание конфигурации "Моя ERP"

## Справочники:
- Контрагенты (поля: Наименование, ИНН, КПП, Адрес)
- Номенклатура (поля: Наименование, Артикул, ВидНоменклатуры)

## Документы:
- ЗаказПокупателя (ТЧ: Товары)
- РеализацияТоваров (ТЧ: Товары)

## Отчеты:
- ОстаткиТоваров (варианты: "По складам", "По номенклатуре")
```

И загружайте его вместе с основными документами.

### Проблема: Сценарии слишком общие

**Решение:**
Будьте конкретнее в запросах:

❌ "Создай сценарий для заказа"
✅ "Создай сценарий для заказа покупателя с проверкой: 
    - заполнения обязательных полей
    - добавления 3 позиций в ТЧ
    - корректного расчета суммы
    - успешного проведения"

---

## Контрольный чеклист внедрения

### Этап 1: Подготовка (1 день)

- [ ] Выгружена актуальная библиотека шагов
- [ ] Созданы все документы из этого руководства
- [ ] Выбран AI-сервис (Claude, ChatGPT, etc.)
- [ ] Настроен доступ к AI

### Этап 2: Обучение команды (2-3 дня)

- [ ] Команда изучила VANESSA_AI_GUIDE.md
- [ ] Проведен воркшоп по работе с AI
- [ ] Созданы первые тестовые сценарии с AI
- [ ] Настроены шаблоны запросов

### Этап 3: Пилот (1-2 недели)

- [ ] Выбрано 5-10 сценариев для генерации с AI
- [ ] Сгенерированы сценарии
- [ ] Проведен code review
- [ ] Запущены в CI/CD
- [ ] Собрана обратная связь

### Этап 4: Масштабирование (ongoing)

- [ ] Внедрение в ежедневную работу
- [ ] Создание библиотеки шаблонов проекта
- [ ] Обучение новых сотрудников
- [ ] Сбор метрик эффективности
- [ ] Непрерывное улучшение процесса

---

## Заключение

Данное решение предоставляет AI-ассистенту все необходимые знания для эффективной работы с Vanessa Automation. 

### Ключевые преимущества:

1. **Ускорение разработки тестов** в 3-5 раз
2. **Снижение порога входа** для новых тестировщиков
3. **Повышение качества** сценариев за счет следования best practices
4. **Унификация подходов** к написанию тестов
5. **Упрощение поддержки** существующих сценариев

### Следующие шаги:

1. Выберите вариант использования из раздела "Варианты использования"
2. Подготовьте необходимые документы
3. Начните с простых сценариев
4. Постепенно усложняйте задачи
5. Делитесь опытом с командой

**Успешного тестирования!**

---

**Версия:** 1.0  
**Дата:** 2025  
**Совместимость:** Vanessa Automation 1.2.042.x+  
**Контакты:** [Ваши контакты для вопросов]
