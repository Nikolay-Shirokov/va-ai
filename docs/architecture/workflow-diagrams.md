# –î–∏–∞–≥—Ä–∞–º–º—ã workflow –¥–ª—è AI-–≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

> **–í–µ—Ä—Å–∏—è:** 1.0  
> **–î–∞—Ç–∞:** 2025-11-28

---

## üîÑ –û–±—â–∏–π workflow —Å human-in-the-loop

```mermaid
graph TB
    Start([–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π]) --> Generate[AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π]
    Generate --> Validate{–ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞}
    
    Validate -->|‚úÖ –í–∞–ª–∏–¥–Ω–æ| Success([‚úÖ –ì–æ—Ç–æ–≤–æ])
    Validate -->|‚ùå –û—à–∏–±–∫–∏| Classify[–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫]
    
    Classify --> CheckType{–¢–∏–ø –æ—à–∏–±–∫–∏?}
    
    %% –£—Ä–æ–≤–µ–Ω—å 1: –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    CheckType -->|Auto-fix<br/>syntax, quotes| AutoFix[–ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    AutoFix --> Counter1{–ü–æ–ø—ã—Ç–∫–∞ < 3?}
    Counter1 -->|–î–∞| Validate
    Counter1 -->|–ù–µ—Ç| Escalate1[ü§ù Human-in-the-loop]
    
    %% –£—Ä–æ–≤–µ–Ω—å 2: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    CheckType -->|Semantic check<br/>step not found| SemanticCheck[–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑]
    SemanticCheck --> Relevance{–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å?}
    
    Relevance -->|High confidence<br/>‚úÖ –í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏| Apply[–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º]
    Apply --> Counter2{–ü–æ–ø—ã—Ç–∫–∞ < 3?}
    Counter2 -->|–î–∞| Validate
    Counter2 -->|–ù–µ—Ç| Escalate2[ü§ù Human-in-the-loop]
    
    Relevance -->|Medium confidence<br/>‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è| AskUser1[ü§ù –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    Relevance -->|Low confidence<br/>‚ùå –ö—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç| Escalate3[ü§ù Human-in-the-loop]
    
    %% –£—Ä–æ–≤–µ–Ω—å 3: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
    CheckType -->|Critical<br/>no suggestions| Escalate4[ü§ù Human-in-the-loop]
    
    %% Human decisions
    AskUser1 --> UserDecision{–†–µ—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}
    Escalate1 --> UserDecision
    Escalate2 --> UserDecision
    Escalate3 --> UserDecision
    Escalate4 --> UserDecision
    
    UserDecision -->|–ü—Ä–∏–º–µ–Ω–∏—Ç—å| ManualApply[–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ]
    UserDecision -->|–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é| ManualFix[–†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    UserDecision -->|–ù–æ–≤—ã–π —à–∞–≥| NewStep[–ó–∞–ø—Ä–æ—Å –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏]
    UserDecision -->|–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å| MarkDraft[–ü–æ–º–µ—Ç–∏—Ç—å @Draft]
    
    ManualApply --> Validate
    ManualFix --> Validate
    NewStep --> End1([–°–æ–∑–¥–∞—Ç—å issue])
    MarkDraft --> End2([–°—Ü–µ–Ω–∞—Ä–∏–π —Å @Draft])
    
    style Success fill:#90EE90
    style AskUser1 fill:#FFD700
    style Escalate1 fill:#FFD700
    style Escalate2 fill:#FFD700
    style Escalate3 fill:#FFD700
    style Escalate4 fill:#FFD700
    style NewStep fill:#FF6B6B
```

---

## üß† –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

```mermaid
graph TB
    Start([–®–∞–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ]) --> HasSuggestions{–ï—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?}
    
    HasSuggestions -->|–ù–µ—Ç<br/>similarity < 70%| NoSuggestions[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ù–µ—Ç –ø–æ—Ö–æ–∂–∏—Ö —à–∞–≥–æ–≤]
    HasSuggestions -->|–î–∞| LoopSuggestions[–î–ª—è –∫–∞–∂–¥–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏]
    
    LoopSuggestions --> Parse[–ü–∞—Ä—Å–∏–Ω–≥ —à–∞–≥–∞]
    Parse --> Extract[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:<br/>- action<br/>- element_type<br/>- context<br/>- params]
    
    Extract --> Check1{–î–µ–π—Å—Ç–≤–∏–µ<br/>—Å–æ–≤–ø–∞–¥–∞–µ—Ç?}
    
    Check1 -->|‚ùå –ù–µ—Ç| Reject1[‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å:<br/>–†–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è]
    Check1 -->|‚úÖ –î–∞| Check2{–≠–ª–µ–º–µ–Ω—Ç<br/>—Å–æ–≤–ø–∞–¥–∞–µ—Ç?}
    
    Check2 -->|‚ùå –ù–µ—Ç| Reject2[‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å:<br/>–†–∞–∑–Ω—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã]
    Check2 -->|‚úÖ –î–∞| Check3{–ö–æ–Ω—Ç–µ–∫—Å—Ç<br/>—Å–æ–≤–ø–∞–¥–∞–µ—Ç?}
    
    Check3 -->|‚ùå –ù–µ—Ç| Warn1[‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:<br/>–†–∞–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç]
    Check3 -->|‚úÖ –î–∞| Check4{–ü–∞—Ä–∞–º–µ—Ç—Ä—ã<br/>—Å–æ–≤–º–µ—Å—Ç–∏–º—ã?}
    
    Check4 -->|‚ùå –ù–µ—Ç| Warn2[‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:<br/>–†–∞–∑–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã]
    Check4 -->|‚úÖ –î–∞| CalcConfidence[–†–∞—Å—á–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏]
    
    Warn1 --> CalcConfidence
    Warn2 --> CalcConfidence
    
    CalcConfidence --> ConfLevel{–£—Ä–æ–≤–µ–Ω—å<br/>—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏?}
    
    ConfLevel -->|High<br/>> 80%<br/>–ù–µ—Ç warnings| Accept[‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏]
    ConfLevel -->|Medium<br/>60-80%<br/>–ò–ª–∏ –µ—Å—Ç—å warnings| AskUser[ü§ù –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    ConfLevel -->|Low<br/>< 60%| Reject3[‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å:<br/>–ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å]
    
    Reject1 --> NextSuggestion{–ï—Å—Ç—å –µ—â–µ<br/>—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?}
    Reject2 --> NextSuggestion
    Reject3 --> NextSuggestion
    
    NextSuggestion -->|–î–∞| LoopSuggestions
    NextSuggestion -->|–ù–µ—Ç| AllRejected[ü§ù –í—Å–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã:<br/>–ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    
    Accept --> ApplyFix[–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    AskUser --> UserChoice{–í—ã–±–æ—Ä<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}
    
    UserChoice -->|–ü—Ä–∏–º–µ–Ω–∏—Ç—å| ApplyFix
    UserChoice -->|–û—Ç–∫–ª–æ–Ω–∏—Ç—å| NextSuggestion
    
    style Accept fill:#90EE90
    style AskUser fill:#FFD700
    style AllRejected fill:#FFD700
    style NoSuggestions fill:#FFD700
    style Reject1 fill:#FFB6C1
    style Reject2 fill:#FFB6C1
    style Reject3 fill:#FFB6C1
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

```mermaid
graph LR
    A[–ù–∞—á–∞–ª–æ] --> B[attempt = 0<br/>MAX = 3]
    B --> C{attempt < MAX?}
    
    C -->|–ù–µ—Ç| Z[ü§ù Escalate:<br/>Max attempts reached]
    C -->|–î–∞| D[–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è]
    
    D --> E[–ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞]
    E --> F{–í–∞–ª–∏–¥–Ω–æ?}
    
    F -->|–î–∞| Success[‚úÖ –ì–æ—Ç–æ–≤–æ]
    F -->|–ù–µ—Ç| G[attempt += 1]
    
    G --> H{attempt < MAX?}
    H -->|–î–∞| C
    H -->|–ù–µ—Ç| Z
    
    style Success fill:#90EE90
    style Z fill:#FFD700
```

---

## üìä –î–µ—Ä–µ–≤–æ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

```mermaid
graph TB
    Start([–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏]) --> Q1{–¢–∏–ø –æ—à–∏–±–∫–∏?}
    
    %% Auto-fix –≤–µ—Ç–∫–∞
    Q1 -->|–°–∏–Ω—Ç–∞–∫—Å–∏—Å<br/>–ö–∞–≤—ã—á–∫–∏<br/>–ó–∞–≥–æ–ª–æ–≤–∫–∏| AutoFix[ü§ñ –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    AutoFix --> End1([‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ])
    
    %% –®–∞–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤–µ—Ç–∫–∞
    Q1 -->|–®–∞–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω| Q2{–ï—Å—Ç—å<br/>—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?}
    
    Q2 -->|–ù–µ—Ç| Human1[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ù–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤]
    Q2 -->|–î–∞| Q3{–í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏<br/>—Å–æ–≤–ø–∞–¥–∞—é—Ç?}
    
    Q3 -->|–ù–µ—Ç| Q4{–ß—Ç–æ –Ω–µ<br/>—Å–æ–≤–ø–∞–¥–∞–µ—Ç?}
    
    Q4 -->|–î–µ–π—Å—Ç–≤–∏–µ| Human2[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–†–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è]
    Q4 -->|–≠–ª–µ–º–µ–Ω—Ç| Human3[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–†–∞–∑–Ω—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã]
    Q4 -->|–ö–æ–Ω—Ç–µ–∫—Å—Ç| Q5{Similarity?}
    Q4 -->|–ü–∞—Ä–∞–º–µ—Ç—Ä—ã| Q6{–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å?}
    
    Q5 -->|> 90%| Ask1[ü§ù –°–ø—Ä–æ—Å–∏—Ç—å:<br/>–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è]
    Q5 -->|< 90%| Human4[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ù–∏–∑–∫–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å]
    
    Q6 -->|–ó–∞–≥–æ–ª–æ–≤–æ–∫ vs –ò–º—è| Ask2[ü§ù –°–ø—Ä–æ—Å–∏—Ç—å:<br/>–ö–∞–∫–æ–π —Å–µ–ª–µ–∫—Ç–æ—Ä?]
    Q6 -->|–ù–µ–∫—Ä–∏—Ç–∏—á–Ω–æ| Q7{Confidence?}
    
    Q3 -->|–î–∞| Q7{Confidence?}
    Q7 -->|High > 80%| Apply1[‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å<br/>–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º]
    Q7 -->|Medium 60-80%| Ask3[ü§ù –°–ø—Ä–æ—Å–∏—Ç—å:<br/>–°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å]
    Q7 -->|Low < 60%| Human5[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å]
    
    %% –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
    Q1 -->|–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è| Human6[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞]
    
    %% –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ
    Q1 -->|–ü–æ–ø—ã—Ç–∫–∞ #3| Human7[ü§ù –ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>–ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ]
    
    Apply1 --> End2([‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ])
    
    style End1 fill:#90EE90
    style End2 fill:#90EE90
    style AutoFix fill:#87CEEB
    style Apply1 fill:#87CEEB
    style Human1 fill:#FFD700
    style Human2 fill:#FFD700
    style Human3 fill:#FFD700
    style Human4 fill:#FFD700
    style Human5 fill:#FFD700
    style Human6 fill:#FFD700
    style Human7 fill:#FFD700
    style Ask1 fill:#FFA500
    style Ask2 fill:#FFA500
    style Ask3 fill:#FFA500
```

---

## üîç –ü—Ä–æ—Ü–µ—Å—Å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π

```mermaid
graph TB
    Start([–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π]) --> Extract[–ò–∑–≤–ª–µ—á—å –≥–ª–∞–≥–æ–ª –∏–∑ —à–∞–≥–∞]
    
    Extract --> Normalize[–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:<br/>- –∫ –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤—É<br/>- –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä]
    
    Normalize --> Check[–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏]
    
    Check --> Cat1{–ö–∞—Ç–µ–≥–æ—Ä–∏—è<br/>–¥–µ–π—Å—Ç–≤–∏—è?}
    
    Cat1 -->|–ö–ª–∏–∫| CatClick["–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ö–ª–∏–∫<br/>‚Ä¢ –Ω–∞–∂–∏–º–∞—é<br/>‚Ä¢ –∫–ª–∏–∫–∞—é<br/>‚Ä¢ —â–µ–ª–∫–∞—é<br/>‚Ä¢ –≤—ã–±–∏—Ä–∞—é (—ç–ª–µ–º–µ–Ω—Ç)"]
    Cat1 -->|–í–≤–æ–¥| CatInput["–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –í–≤–æ–¥<br/>‚Ä¢ –≤–≤–æ–∂—É<br/>‚Ä¢ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é<br/>‚Ä¢ –∑–∞–¥–∞—é<br/>‚Ä¢ –∑–∞–ø–æ–ª–Ω—è—é"]
    Cat1 -->|–í—ã–±–æ—Ä| CatSelect["–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –í—ã–±–æ—Ä<br/>‚Ä¢ –≤—ã–±–∏—Ä–∞—é –∏–∑ —Å–ø–∏—Å–∫–∞<br/>‚Ä¢ –≤—ã–±–∏—Ä–∞—é –ø–æ —Å—Ç—Ä–æ–∫–µ<br/>‚Ä¢ –≤—ã–±–∏—Ä–∞—é —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"]
    Cat1 -->|–ü—Ä–æ–≤–µ—Ä–∫–∞| CatCheck["–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü—Ä–æ–≤–µ—Ä–∫–∞<br/>‚Ä¢ –ø—Ä–æ–≤–µ—Ä—è—é<br/>‚Ä¢ —Å—Ä–∞–≤–Ω–∏–≤–∞—é<br/>‚Ä¢ —É–±–µ–∂–¥–∞—é—Å—å<br/>‚Ä¢ –∂–¥—É"]
    Cat1 -->|–ù–∞–≤–∏–≥–∞—Ü–∏—è| CatNav["–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ù–∞–≤–∏–≥–∞—Ü–∏—è<br/>‚Ä¢ –æ—Ç–∫—Ä—ã–≤–∞—é<br/>‚Ä¢ –ø–µ—Ä–µ—Ö–æ–∂—É<br/>‚Ä¢ –∑–∞–∫—Ä—ã–≤–∞—é<br/>‚Ä¢ –∞–∫—Ç–∏–≤–∏–∑–∏—Ä—É—é"]
    
    CatClick --> Compare{–û–±–µ<br/>–≤ –æ–¥–Ω–æ–π<br/>–∫–∞—Ç–µ–≥–æ—Ä–∏–∏?}
    CatInput --> Compare
    CatSelect --> Compare
    CatCheck --> Compare
    CatNav --> Compare
    
    Compare -->|‚úÖ –î–∞| Match[‚úÖ –î–µ–π—Å—Ç–≤–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç<br/>match_score = 1.0]
    Compare -->|‚ùå –ù–µ—Ç| NoMatch[‚ùå –î–µ–π—Å—Ç–≤–∏—è –ù–ï —Å–æ–≤–ø–∞–¥–∞—é—Ç<br/>match_score = 0.0]
    
    Match --> Result1[–ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É]
    NoMatch --> Result2[‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é]
    
    style Match fill:#90EE90
    style NoMatch fill:#FFB6C1
    style Result2 fill:#FFB6C1
```

---

## üéØ –ü—Ä–æ—Ü–µ—Å—Å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤

```mermaid
graph TB
    Start([–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤]) --> Parse[–ò–∑–≤–ª–µ—á—å —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞]
    
    Parse --> Map[–ú–∞–ø–ø–∏–Ω–≥ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é]
    
    Map --> Tree{–ò–µ—Ä–∞—Ä—Ö–∏—è<br/>—ç–ª–µ–º–µ–Ω—Ç–æ–≤}
    
    Tree -->|–ö–Ω–æ–ø–æ—á–Ω—ã–µ| Btn["‚Ä¢ –∫–Ω–æ–ø–∫–∞<br/>‚Ä¢ –∫–Ω–æ–ø–∫–∞ —Å –∏–º–µ–Ω–µ–º<br/>‚Ä¢ –∫–Ω–æ–ø–∫–∞ –ö–ò<br/>‚Ä¢ –∫–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞"]
    Tree -->|–ü–æ–ª—è| Fld["‚Ä¢ –ø–æ–ª–µ<br/>‚Ä¢ –ø–æ–ª–µ —Å –∏–º–µ–Ω–µ–º<br/>‚Ä¢ –ø–æ–ª–µ –≤–≤–æ–¥–∞"]
    Tree -->|–°–ø–∏—Å–∫–∏| Lst["‚Ä¢ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫<br/>‚Ä¢ —Å–ø–∏—Å–æ–∫<br/>‚Ä¢ –¥–µ—Ä–µ–≤–æ"]
    Tree -->|–°—Å—ã–ª–∫–∏| Lnk["‚Ä¢ –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞<br/>‚Ä¢ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞"]
    Tree -->|–¢–∞–±–ª–∏—Ü—ã| Tbl["‚Ä¢ —Ç–∞–±–ª–∏—Ü–∞<br/>‚Ä¢ —Ç–∞–±–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å"]
    
    Btn --> Check{–í –æ–¥–Ω–æ–π<br/>–≥—Ä—É–ø–ø–µ?}
    Fld --> Check
    Lst --> Check
    Lnk --> Check
    Tbl --> Check
    
    Check -->|‚úÖ –î–∞<br/>–û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞| Same[‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç<br/>match_score = 1.0]
    Check -->|‚ö†Ô∏è –ë–ª–∏–∑–∫–æ<br/>–ü–æ—Ö–æ–∂–∏–µ –≥—Ä—É–ø–ø—ã| Similar[‚ö†Ô∏è –ü–æ—Ö–æ–∂–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã<br/>match_score = 0.7<br/>+ Warning]
    Check -->|‚ùå –ù–µ—Ç<br/>–†–∞–∑–Ω—ã–µ –≥—Ä—É–ø–ø—ã| Different[‚ùå –†–∞–∑–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã<br/>match_score = 0.0<br/>+ Critical Warning]
    
    Same --> Result1[–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É]
    Similar --> Result2[–°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    Different --> Result3[‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
    
    style Same fill:#90EE90
    style Similar fill:#FFA500
    style Different fill:#FFB6C1
    style Result3 fill:#FFB6C1
```

---

## ‚ö° –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Sequence Diagram)

```mermaid
sequenceDiagram
    participant U as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant AI as AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
    participant V as –í–∞–ª–∏–¥–∞—Ç–æ—Ä
    participant L as –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–≥–æ–≤
    
    U->>AI: –°–æ–∑–¥–∞–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è...
    activate AI
    
    AI->>AI: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è
    AI->>V: validate.py scenario.feature --ai-enhanced
    activate V
    
    V->>L: –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–≥–æ–≤
    activate L
    L-->>V: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    deactivate L
    
    V->>V: –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö (similarity)
    V->>V: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    V-->>AI: –û—Ç—á–µ—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
    deactivate V
    
    alt –í—Å–µ —à–∞–≥–∏ –≤–∞–ª–∏–¥–Ω—ã
        AI-->>U: ‚úÖ –ì–æ—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
    else –û—à–∏–±–∫–∏ auto-fix
        AI->>AI: –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        AI->>V: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
        V-->>AI: ‚úÖ –í–∞–ª–∏–¥–Ω–æ
        AI-->>U: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
    else –û—à–∏–±–∫–∏ semantic check
        AI->>AI: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
        
        alt High confidence
            AI->>AI: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º
            AI->>V: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
            V-->>AI: –†–µ–∑—É–ª—å—Ç–∞—Ç
            AI-->>U: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π + –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
        else Medium/Low confidence
            AI->>U: ü§ù –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –≤—ã–±–æ—Ä–æ–º
            U->>AI: –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            AI->>AI: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ
            AI->>V: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
            V-->>AI: –†–µ–∑—É–ª—å—Ç–∞—Ç
            AI-->>U: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
        end
        
    else –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ
        AI->>U: ü§ù –ù–µ –º–æ–≥—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        U->>AI: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        AI->>V: –í–∞–ª–∏–¥–∞—Ü–∏—è
        V-->>AI: ‚úÖ –í–∞–ª–∏–¥–Ω–æ
        AI-->>U: ‚úÖ –ì–æ—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
    end
    
    deactivate AI
```

---

## üìà Flowchart —Å—á–µ—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫

```mermaid
flowchart TD
    Start([–ù–∞—á–∞–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π]) --> Init[attempt_counter = 0<br/>MAX_ATTEMPTS = 3<br/>history = empty]
    
    Init --> Loop{attempt_counter<br/>< MAX_ATTEMPTS?}
    
    Loop -->|–ù–µ—Ç ‚â•3| Escalate[ü§ù Escalate to Human<br/>with full history]
    Loop -->|–î–∞ <3| ApplyFix[–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è]
    
    ApplyFix --> Validate[–ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞]
    Validate --> Check{–í–∞–ª–∏–¥–Ω–æ?}
    
    Check -->|‚úÖ –î–∞| Success([‚úÖ –ì–æ—Ç–æ–≤–æ])
    Check -->|‚ùå –ù–µ—Ç| Record[–ó–∞–ø–∏—Å–∞—Ç—å –ø–æ–ø—ã—Ç–∫—É –≤ history:<br/>- –Ω–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏<br/>- –æ—à–∏–±–∫–∏<br/>- –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è]
    
    Record --> Increment[attempt_counter += 1]
    Increment --> Loop
    
    Escalate --> ShowHistory[–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:<br/>1. –ò—Å—Ö–æ–¥–Ω—É—é –æ—à–∏–±–∫—É<br/>2. –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏<br/>3. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ]
    
    ShowHistory --> UserAction{–î–µ–π—Å—Ç–≤–∏–µ<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}
    
    UserAction -->|–ò—Å–ø—Ä–∞–≤–∏—Ç—å| ManualFix[–†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
    UserAction -->|–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥| NewApproach[–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Ç–µ—Å—Ç–∞]
    UserAction -->|–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å| MarkDraft[–ü–æ–º–µ—Ç–∏—Ç—å @Draft]
    
    ManualFix --> FinalValidate[–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è]
    NewApproach --> FinalValidate
    
    FinalValidate --> FinalCheck{–í–∞–ª–∏–¥–Ω–æ?}
    FinalCheck -->|‚úÖ –î–∞| Success
    FinalCheck -->|‚ùå –ù–µ—Ç| ShowHistory
    
    MarkDraft --> End([–°—Ü–µ–Ω–∞—Ä–∏–π —Å @Draft])
    
    style Success fill:#90EE90
    style End fill:#87CEEB
    style Escalate fill:#FFD700
    style ShowHistory fill:#FFD700
```

---

## üé® –õ–µ–≥–µ–Ω–¥–∞ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º

### –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

```
üü¢ –ó–µ–ª–µ–Ω—ã–π (#90EE90)  - –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
üü° –ñ–µ–ª—Ç—ã–π (#FFD700)   - –¢—Ä–µ–±—É–µ—Ç—Å—è —É—á–∞—Å—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π (#FFA500) - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –≤–Ω–∏–º–∞–Ω–∏–µ
üî¥ –†–æ–∑–æ–≤—ã–π (#FFB6C1)   - –û—Ç–∫–ª–æ–Ω–µ–Ω–æ, –æ—à–∏–±–∫–∞
üîµ –ì–æ–ª—É–±–æ–π (#87CEEB)  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ AI
```

### –°–∏–º–≤–æ–ª—ã –¥–µ–π—Å—Ç–≤–∏–π

```
ü§ñ - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ AI
ü§ù - Human-in-the-Loop (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
‚úÖ - –£—Å–ø–µ—Ö, –æ–¥–æ–±—Ä–µ–Ω–æ
‚ùå - –û—Ç–∫–ª–æ–Ω–µ–Ω–æ, –æ—à–∏–±–∫–∞
‚ö†Ô∏è - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
üîÑ - –ü–æ–≤—Ç–æ—Ä, –∏—Ç–µ—Ä–∞—Ü–∏—è
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –¢–∏–ø–∏—á–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

```mermaid
pie title –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
    "Auto-fix (–∫–∞–≤—ã—á–∫–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏)" : 40
    "Semantic check (—à–∞–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω)" : 45
    "Critical (–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)" : 10
    "–ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ" : 5
```

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —Ç–∏–ø–∞–º

```mermaid
graph LR
    A[Auto-fix<br/>~2 —Å–µ–∫] --> B[Semantic check<br/>~5 —Å–µ–∫]
    B --> C[Human input<br/>~60 —Å–µ–∫]
    
    style A fill:#90EE90
    style B fill:#87CEEB
    style C fill:#FFD700
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [`ai-validator-integration.md`](ai-validator-integration.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
- [`../ai-knowledge/semantic-validation-guide.md`](../ai-knowledge/semantic-validation-guide.md) - –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [`../templates/prompts/ai-validator-workflow.md`](../templates/prompts/ai-validator-workflow.md) - –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è AI
