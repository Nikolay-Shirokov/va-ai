# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º Python CLI

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î–≤–æ–π–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞)

**–§–∞–π–ª:** [`form_context_cli.py`](form_context_cli.py:70-93)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
# –°—Ç—Ä–æ–∫–∏ 70-72: –∫–∞–≤—ã—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏
args = [
    "ENTERPRISE",
    f'/F "{infobase}"',           # ‚ùå –î–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏
    f'/Execute "{processing_path}"'  # ‚ùå –î–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏
]

# –°—Ç—Ä–æ–∫–∞ 93: –µ—â–µ —Ä–∞–∑ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –∫–∞–≤—ã—á–∫–∏
full_cmd_str = f'"{command}" {" ".join(args)}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
"1cv8.exe" ENTERPRISE /F "File=C:/Bases/Test/" /Execute "C:/path/to.epf"
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã `/F` –∏ `/Execute` –ø–æ–ª—É—á–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è **—Å –∫–∞–≤—ã—á–∫–∞–º–∏ –≤–Ω—É—Ç—Ä–∏**, —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥.

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
"1cv8.exe" ENTERPRISE /F"File=C:/Bases/Test/" /Execute"C:/path/to.epf"
```
–∏–ª–∏
```
1cv8.exe ENTERPRISE /F "File=C:/Bases/Test/" /Execute "C:/path/to.epf"
```

### 2. –ü—Ä–æ–±–µ–ª –ø–æ—Å–ª–µ `/Execute` (—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞)

**–°—Ç—Ä–æ–∫–∞ 72:**
```python
f'/Execute "{processing_path}"'  # ‚ùå –ü—Ä–æ–±–µ–ª –ø–æ—Å–ª–µ /Execute
```

–ü–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É 1–° –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- `/Execute"–ø—É—Ç—å"` - –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞
- `/Execute`, `"–ø—É—Ç—å"` - –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

Python —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ `.env` —Ñ–∞–π–ª–∞, —á—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## –†–µ—à–µ–Ω–∏–µ: PowerShell –≤–µ—Ä—Å–∏—è

–°–æ–∑–¥–∞–Ω [`form_context_agent.ps1`](form_context_agent.ps1) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ [`partial-load-config.ps1`](../../upload/partial-load-config/scripts/partial-load-config.ps1).

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PowerShell —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:**
```powershell
$arguments = @("ENTERPRISE")
$arguments += "/F", "`"$InfoBasePath`""
$arguments += "/Execute", "`"$processingPath`""

Start-Process -FilePath $V8Path -ArgumentList $arguments
```
PowerShell –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–∞–≤—ã—á–∫–∏.

‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env —Ñ–∞–π–ª–∞:**
```powershell
function Import-EnvFile {
    # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
}
```

‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
```
–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Üí .env —Ñ–∞–π–ª ‚Üí –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥:**
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ [`partial-load-config.ps1`](../../upload/partial-load-config/scripts/partial-load-config.ps1), –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PowerShell –≤–µ—Ä—Å–∏—é:**
1. ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ Windows
2. ‚úÖ –£–¥–æ–±–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
4. ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç Python –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Python –≤–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è:**
- –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (Linux/macOS)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Python-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- –ù–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫!

---

## –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å Python –≤–µ—Ä—Å–∏—é (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –∫–∞–≤—ã—á–∫–∏

```python
# –í–º–µ—Å—Ç–æ
args = [
    "ENTERPRISE",
    f'/F "{infobase}"',
    f'/Execute "{processing_path}"'
]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
args = [
    "ENTERPRISE",
    "/F", infobase,              # ‚úÖ –î–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
    "/Execute", str(processing_path)  # ‚úÖ –î–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
]

# –ò –Ω–µ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤ –ø–æ–ª–Ω—É—é —Å—Ç—Ä–æ–∫—É
process = subprocess.Popen(
    [command] + args,           # ‚úÖ –ú–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    shell=False                 # ‚úÖ –ù–µ —á–µ—Ä–µ–∑ shell
)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è shell

```python
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ shell=True
full_cmd_str = f'"{command}" ENTERPRISE /F"{infobase}" /Execute"{processing_path}"'
# –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –ø–æ—Å–ª–µ /F –∏ /Execute
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É .env

```python
from pathlib import Path

def load_env_file(env_path: Path = Path(".env")):
    if not env_path.exists():
        return {}
    
    env_vars = {}
    with open(env_path, 'r', encoding='utf-8') as f:
        for line in f:
            line = line.strip()
            if line and not line.startswith('#'):
                if '=' in line:
                    key, value = line.split('=', 1)
                    env_vars[key.strip()] = value.strip().strip('"\'')
    return env_vars

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
env = load_env_file()
exe_path = args.exe_path or env.get('V8_PATH', '1cv8.exe')
infobase = args.infobase or env.get('INFOBASE_PATH')
```

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | Python CLI | PowerShell CLI |
|--------|-----------|----------------|
| **–†–∞–±–æ—Ç–∞ –≤ Windows** | ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞–≤—ã—á–∫–∞–º–∏ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env** | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| **–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** | ‚úÖ –î–∞ (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏) | ‚ùå –¢–æ–ª—å–∫–æ Windows |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | Python 3.6+ | PowerShell 5.1+ |
| **–ö–æ–¥** | –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ** | ‚ùå –ò–º–µ–µ—Ç –±–∞–≥–∏ | ‚úÖ –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–º –∫–æ–¥–µ |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å PowerShell

```powershell
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env (–æ–¥–∏–Ω —Ä–∞–∑)
Copy-Item .env.example .env
notepad .env

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
.\tools\form-context\form_context_agent.ps1 `
    -FormsFile "tools\form-context\forms.txt" `
    -Wait
```

üìå **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [`QUICKSTART_POWERSHELL.md`](QUICKSTART_POWERSHELL.md)

---

**–í—ã–≤–æ–¥:** –î–ª—è Windows-–æ–∫—Ä—É–∂–µ–Ω–∏—è 1–° –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è PowerShell –≤–µ—Ä—Å–∏—è —Å .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.